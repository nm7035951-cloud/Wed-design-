<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MyShop - Single File SPA</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
  :root{
    --primary-1: #2575fc;
    --primary-2: #6a11cb;
    --accent: #ffdd57;
    --bg: #f4f6fb;
    --card-bg: #ffffff;
    --muted: #6c757d;
  }
  body{font-family: 'Segoe UI', Tahoma, sans-serif; background:var(--bg); margin:0;}

  .main-nav{background: linear-gradient(135deg,var(--primary-1),var(--primary-2));}

  .brand{font-weight:700; color:#fff; letter-spacing:.4px;}

  .page{display:none; padding:28px; min-height:calc(100vh - 72px);}
  .active-page{display:block;}
  .card-rounded{border-radius:16px; background:var(--card-bg);}
  .btn-primary-custom{background:var(--primary-1); border:0; color:#fff;}
  .btn-primary-custom:hover{background:var(--primary-2); transform:scale(1.03);}

  .product-card{border-radius:14px; transition:transform .25s, box-shadow .25s;}
  .product-card:hover{transform:translateY(-8px); box-shadow:0 12px 30px rgba(38,43,77,0.12);}
  .img-cover{object-fit:cover; height:200px; width:100%; border-top-left-radius:14px; border-top-right-radius:14px;}

  .login-wrap{min-height:100vh; display:flex; align-items:center; justify-content:center;}
  .login-card{width:360px; border-radius:18px; padding:26px; background: linear-gradient(135deg,#6a11cb 0%, #2575fc 100%); color:#fff; box-shadow:0 10px 30px rgba(0,0,0,0.15);}
  .glass{background:rgba(255,255,255,0.04); padding:16px; border-radius:12px;}
  input::placeholder{opacity:.9;}

  .small-btn{border-radius:10px; transition:transform .12s;}
  .small-btn:hover{transform:translateY(-3px);}
  .fade-in{animation:fadeIn .5s ease;}
  @keyframes fadeIn{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none}}

  @media (max-width:576px){
    .img-cover{height:160px;}
    .login-card{width:92%;}
  }
  .fade-out {
  animation: fadeOut 0.5s forwards;
}
@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; transform: translateY(-20px); }
}

.btn,
.btn-primary-custom,
.btn-outline-secondary,
.btn-outline-danger,
.btn-danger {
  position: relative;
  overflow: hidden;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.btn::before,
.btn-primary-custom::before,
.btn-outline-secondary::before,
.btn-outline-danger::before,
.btn-danger::before {
  content: "";
  position: absolute;
  top: 0;
  left: -75%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    120deg,
    rgba(255, 255, 255, 0.2) 0%,
    rgba(255, 255, 255, 0.6) 50%,
    rgba(255, 255, 255, 0.2) 100%
  );
  transform: skewX(-25deg);
}

.btn:hover::before,
.btn-primary-custom:hover::before,
.btn-outline-secondary:hover::before,
.btn-outline-danger:hover::before,
.btn-danger:hover::before {
  animation: shine 0.8s ease forwards;
}

@keyframes shine {
  0% {
    left: -75%;
  }
  100% {
    left: 125%;
  }
}

.btn:hover,
.btn-primary-custom:hover,
.btn-outline-secondary:hover,
.btn-outline-danger:hover,
.btn-danger:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

.img-cover {
  transition: transform 0.4s ease, box-shadow 0.4s ease;
}
.img-cover:hover {
  transform: scale(1.05);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}


.card,
.product-card,
.card-rounded {
  opacity: 0;
  transform: translateY(20px);
  animation: fadeUp 0.6s ease forwards;
}


.product-card:nth-child(1) { animation-delay: 0.1s; }
.product-card:nth-child(2) { animation-delay: 0.2s; }
.product-card:nth-child(3) { animation-delay: 0.3s; }
.product-card:nth-child(4) { animation-delay: 0.4s; }


@keyframes fadeUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}


.product-card:hover,
.card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
}

.float-up-down {
  animation: floatY 3s ease-in-out infinite;
}

@keyframes floatY {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
}
.main-nav {
  background: linear-gradient(-45deg, #2575fc, #6a11cb, #ff6600, #ffdd57);
  background-size: 400% 400%;
  animation: gradientBG 8s ease infinite;
}
@keyframes gradientBG {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
@keyframes cartBump {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.3); }
}
.bump {
  animation: cartBump 0.3s ease;
}
.icon-hover {
  display: inline-block;
  transition: transform 0.6s ease;
}

.icon-hover:hover {
  transform: rotate(360deg);
}
</style>
</head>
<body>


<section id="login-page" class="page login-wrap active-page">
  <div class="login-card text-white shadow">
    <h3 class="mb-3">Welcome back</h3>
    <p class="mb-4" style="opacity:.9">Sign in to continue to MyShop</p>
    <div class="glass mb-3">
      <input id="login-email" class="form-control mb-2" placeholder="Email (test@test.com)" type="email">
      <input id="login-pass" class="form-control mb-2" placeholder="Password (12345)" type="password">
    </div>
    <button class="btn btn-primary-custom w-100 mb-2" id="login-btn"><i class="bi bi-box-arrow-in-right me-2"></i>Login</button>
    <div class="text-center" style="opacity:.9; font-size:14px">Use <strong>test@test.com</strong> / <strong>12345</strong></div>
  </div>
</section>


<nav id="main-nav" class="navbar navbar-expand-lg main-nav" style="display:none;">
  <div class="container">
    <a class="navbar-brand brand fw-bold fs-4" href="#" data-route="home"><i class="bi bi-shop-window me-2"></i>MyShop</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navCollapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navCollapse">
      <ul class="navbar-nav ms-auto align-items-center nav-links">
        <li class="nav-item"><a class="nav-link" href="#" data-route="home"><i class="bi bi-house-door me-1"></i>Home</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-route="products"><i class="bi bi-bag me-1"></i>Products</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-route="about"><i class="bi bi-info-circle me-1"></i>About</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-route="add"><i class="bi bi-plus-square me-1"></i>Add Product</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-route="cart"><i class="bi bi-cart me-1"></i>Cart (<span id="cart-count">0</span>)</a></li>
        <li class="nav-item"><a class="nav-link small-btn" href="#" id="logout-btn"><i class="bi bi-box-arrow-left me-1"></i>Logout</a></li>
      </ul>
    </div>
  </div>
</nav>
<style>

  .nav-links .nav-item {
    display: inline-block;
    margin: 0 10px;
  }


  .nav-links .nav-link {
    color: #333;
    font-weight: 500;
    position: relative;
    padding-bottom: 5px;
    transition: color 0.3s ease;
  }


  .nav-links .nav-link::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    height: 2px;
    width: 0%;
    background-color: #ff6600; /* لون الخط */
    transition: width 0.3s ease;
  }


  .nav-links .nav-link:hover {
    color: #ff6600;
  }

  .nav-links .nav-link:hover::after {
    width: 100%;
  }
</style>


<section id="home" class="page" aria-hidden="true">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h1 class="fade-in">Discover great products</h1>
        <p class="text-muted">A simple demo SPA with products, cart, add product and persistent state using LocalStorage. Built with Bootstrap, Swiper & SweetAlert.</p>
        <div class="mt-3">
          <button class="btn btn-primary-custom me-2" data-route="products"><i class="bi bi-bag me-2"></i>Browse Products</button>
          <button class="btn btn-outline-secondary" data-route="about"><i class="bi bi-info-circle me-2"></i>About</button>
        </div>
      </div>
      <div class="col-md-6">

        <div class="swiper mySwiper card-rounded shadow" style="height:300px; overflow:hidden;">
          <div class="swiper-wrapper">
            <div class="swiper-slide"><img class="img-cover" src="https://picsum.photos/seed/banner1/1200/600" alt=""></div>
            <div class="swiper-slide"><img class="img-cover" src="https://picsum.photos/seed/banner2/1200/600" alt=""></div>
            <div class="swiper-slide"><img class="img-cover" src="https://picsum.photos/seed/banner3/1200/600" alt=""></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="about" class="page" aria-hidden="true">
  <div class="container">
    <h2>About MyShop</h2>
    <div class="row align-items-center">
      <div class="col-md-4">
        <div class="card card-rounded p-3 text-center shadow">
<img src="https://picsum.photos/200"
class="rounded-circle mb-3 float-up-down"
width="140"
alt="logo">
          <h5>MyShop</h5>
          <p class="text-muted">A lightweight single-file demo e-commerce SPA using modern small libraries. Great for learning DOM, localStorage and frontend interactions.</p>
        </div>
      </div>
      <div class="col-md-8">
        <div class="card card-rounded p-4 shadow">
          <h5>Features</h5>
          <ul>
            <li>Login with static credentials</li>
            <li>Persistent products and cart in LocalStorage</li>
            <li>Swiper promo slider</li>
            <li>SweetAlert confirmations & notifications</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>


<section id="products" class="page" aria-hidden="true">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3>Products</h3>
      <div>
        <button class="btn btn-outline-secondary me-2" data-route="add"><i class="bi bi-plus-square me-1"></i>Add Product</button>
        <button class="btn btn-primary-custom" onclick="renderProducts()"><i class="bi bi-arrow-clockwise me-1"></i>Refresh</button>
      </div>
    </div>

    <div id="products-grid" class="row g-3"></div>
  </div>
</section>

<section id="add" class="page" aria-hidden="true">
  <div class="container">
    <h3>Add New Product</h3>
    <div class="row">
      <div class="col-md-6">
        <div class="card card-rounded p-3 shadow">
          <label class="form-label">Product Name</label>
          <input id="add-name" class="form-control mb-2" placeholder="e.g. Red Sneakers">
          <label class="form-label">Price (USD)</label>
          <input id="add-price" class="form-control mb-2" type="number" placeholder="e.g. 99">
          <label class="form-label">Image URL</label>
          <input id="add-img" class="form-control mb-3" placeholder="https://... (or leave blank for placeholder)">
          <div>
            <button class="btn btn-primary-custom" id="add-product-btn"><i class="bi bi-check2 me-1"></i>Add Product</button>
            <button class="btn btn-outline-secondary" data-route="products"><i class="bi bi-arrow-left me-1"></i>Back to Products</button>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card card-rounded p-3 shadow">
          <h6>Preview</h6>
          <div id="preview-area" class="text-center">
            <img id="preview-img" src="https://picsum.photos/300" class="img-fluid mb-2 float-up-down" style="max-height:200px; border-radius:10px;">
            <h5 id="preview-name">Product Name</h5>
            <p id="preview-price" class="text-muted">$0</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="cart" class="page" aria-hidden="true">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3>Your Cart</h3>
      <div>
        <button class="btn btn-outline-secondary" data-route="products"><i class="bi bi-bag me-1"></i>Continue Shopping</button>
      </div>
    </div>

    <div id="cart-list" class="row g-3"></div>

    <div class="mt-4 d-flex justify-content-between align-items-center">
      <h4>Total: $<span id="cart-total">0</span></h4>
      <div>
        <button class="btn btn-danger" id="clear-cart-btn">Clear Cart</button>
        <button class="btn btn-primary-custom" id="checkout-btn"><i class="bi bi-trash me-1"></i>Checkout</button>
      </div>
    </div>
  </div>
</section>
<footer class="text-center py-3 mt-4" style="background:var(--primary-2); color:white;">
  <p>&copy; 2025 MyShop - All rights reserved.</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>

const pages = {
  login: document.getElementById('login-page'),
  home: document.getElementById('home'),
  about: document.getElementById('about'),
  products: document.getElementById('products'),
  add: document.getElementById('add'),
  cart: document.getElementById('cart')
};
const nav = document.getElementById('main-nav');
const cartCountEl = document.getElementById('cart-count');

function showPage(name){

  if(name !== 'login' && localStorage.getItem('isLoggedIn') !== 'true'){
    name = 'login';
  }

  nav.style.display = (name === 'login') ? 'none' : 'block';


  Object.keys(pages).forEach(k=>{
    pages[k].classList.remove('active-page');
    pages[k].setAttribute('aria-hidden','true');
  });
  pages[name].classList.add('active-page');
  pages[name].setAttribute('aria-hidden','false');


  if(name === 'home') initSwiper();
  if(name === 'products') renderProducts();
  if(name === 'cart') renderCart();
}

document.addEventListener('click', (e)=>{
  const route = e.target.getAttribute('data-route');
  if(route){ e.preventDefault(); showPage(route); }
});


function updateCartCount(){
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  cartCountEl.innerText = cart.length;
}

document.getElementById('login-btn').addEventListener('click', ()=>{
  const email = document.getElementById('login-email').value.trim();
  const pass = document.getElementById('login-pass').value.trim();
  if(!email || !pass){
    Swal.fire('Error','Please fill all fields','error'); return;
  }

  if (email === 'test@test.com' && pass === '12345') {
  localStorage.setItem('isLoggedIn', 'true');
  
  if (!localStorage.getItem('products')) {
    const defaultProducts = [
      { id: 1, name: 'Classic Watch', price: 120, img: 'https://picsum.photos/seed/p1/400/300' },
      { id: 2, name: 'Sport Sneakers', price: 85, img: 'https://picsum.photos/seed/p2/400/300' },
      { id: 3, name: 'Leather Bag', price: 149, img: 'https://picsum.photos/seed/p3/400/300' }
    ];
    localStorage.setItem('products', JSON.stringify(defaultProducts));
  } 
  
  const loginPage = document.getElementById('login-page');
  loginPage.classList.add('fade-out');
  

  setTimeout(() => {
    loginPage.remove();
    showPage('home');
    window.scrollTo({ top: 0 });
    updateCartCount();
    Swal.fire({ icon: 'success', title: 'Welcome!', text: 'You are logged in.' });
  }, 500); 
  
  } else {
    Swal.fire('Error','Invalid credentials','error');
  }
});

document.getElementById('logout-btn').addEventListener('click', (e)=>{
  e.preventDefault();
  Swal.fire({
    title: 'Logout?',
    text: "Are you sure you want to logout?",
    icon: 'warning',
    showCancelButton: true
  }).then(res=>{
    if(res.isConfirmed){
      localStorage.removeItem('isLoggedIn');

      showPage('login');
      Swal.fire('Logged out','You have been logged out','success');
    }
  });
})

let swiperInstance = null;
function initSwiper(){
  setTimeout(()=>{
    if(swiperInstance) swiperInstance.destroy(true,true);
    swiperInstance = new Swiper('.mySwiper', {
      effect: 'fade',
      loop: true,
      autoplay: { delay: 3000, disableOnInteraction:false },
      speed:800
    });
  }, 50);
}


function getProducts(){
  return JSON.parse(localStorage.getItem('products')) || [];
}

function setProducts(arr){
  localStorage.setItem('products', JSON.stringify(arr));
}

function renderProducts(){
  const container = document.getElementById('products-grid');
  const products = getProducts();
  container.innerHTML = '';
  if(!products.length){
    container.innerHTML = `<div class="col-12"><div class="card card-rounded p-4 text-center shadow"><h5>No products yet</h5><p class="text-muted">Add new products from the Add Product page.</p></div></div>`;
    return;
  }
  products.forEach(p=>{
    const col = document.createElement('div');
    col.className = 'col-sm-6 col-lg-4';
    col.innerHTML = `
      <div class="card product-card shadow-sm">
        <img src="${p.img || 'https://picsum.photos/seed/placeholder/400/300'}" class="img-cover" alt="${escapeHtml(p.name)}">
        <div class="p-3">
          <h5>${escapeHtml(p.name)}</h5>
          <p class="text-muted mb-2">$${Number(p.price).toFixed(2)}</p>
          <div class="d-flex gap-2">
            <button class="btn btn-primary-custom btn-sm" onclick="addToCart(${p.id})">Add to Cart</button>
            <button class="btn btn-outline-danger btn-sm" onclick="confirmRemove(${p.id})">Remove</button>
          </div>
        </div>
      </div>
    `;
    container.appendChild(col);
  });
}

function confirmRemove(id){
  Swal.fire({
    title: 'Remove product?',
    text: 'This will delete the product from the list.',
    icon: 'warning',
    showCancelButton: true
  }).then(res=>{
    if(res.isConfirmed){
      let products = getProducts();
      products = products.filter(p=>p.id !== id);
      setProducts(products);
      renderProducts();
      Swal.fire('Removed','Product deleted','success');
    }
  });
}

function addToCart(id){
  const products = getProducts();
  const prod = products.find(p=>p.id === id);
  if(!prod){ Swal.fire('Error','Product not found','error'); return; }
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  cart.push(prod);
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCartCount();
  Swal.fire('Added','Product added to cart','success');
}

function renderCart(){
  const container = document.getElementById('cart-list');
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  container.innerHTML = '';
  if(!cart.length){
    container.innerHTML = `<div class="col-12"><div class="card card-rounded p-4 text-center shadow"><h5>Your cart is empty</h5><p class="text-muted">Add products from the products page.</p></div></div>`;
    document.getElementById('cart-total').innerText = '0.00';
    return;
  }
  let total = 0;
  cart.forEach((p, idx)=>{
    total += Number(p.price);
    const col = document.createElement('div');
    col.className = 'col-md-4';
    col.innerHTML = `
      <div class="card card-rounded p-3 shadow-sm">
        <img src="${p.img || 'https://picsum.photos/seed/placeholder/400/300'}" class="img-cover mb-2" alt="${escapeHtml(p.name)}">
        <h6>${escapeHtml(p.name)}</h6>
        <p class="text-muted mb-2">$${Number(p.price).toFixed(2)}</p>
        <div class="d-flex gap-2">
          <button class="btn btn-danger btn-sm" onclick="removeFromCart(${idx})">Remove</button>
        </div>
      </div>
    `;
    container.appendChild(col);
  });
  document.getElementById('cart-total').innerText = Number(total).toFixed(2);
  updateCartCount();
}

function removeFromCart(index){
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  if(index < 0 || index >= cart.length) return;
  cart.splice(index,1);
  localStorage.setItem('cart', JSON.stringify(cart));
  renderCart();
  Swal.fire('Removed','Item removed from cart','success');
}

document.getElementById('clear-cart-btn').addEventListener('click', ()=>{
  Swal.fire({
    title:'Clear cart?',
    text:'Remove all items from the cart?',
    icon:'warning',
    showCancelButton:true
  }).then(res=>{
    if(res.isConfirmed){
      localStorage.setItem('cart', JSON.stringify([]));
      renderCart();
      Swal.fire('Cleared','Cart emptied','success');
    }
  });
});

document.getElementById('checkout-btn').addEventListener('click', ()=>{
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  if(!cart.length){ Swal.fire('Empty','Your cart is empty','info'); return; }
  Swal.fire({
    title: 'Checkout',
    html: `<p>Total: <strong>$${document.getElementById('cart-total').innerText}</strong></p><p>Proceed to checkout?</p>`,
    showCancelButton: true,
    confirmButtonText: 'Yes, pay'
  }).then(res=>{
    if(res.isConfirmed){

      localStorage.setItem('cart', JSON.stringify([]));
      renderCart();
      Swal.fire('Success','Payment successful — thank you!','success');
    }
  });
});

const addName = document.getElementById('add-name');
const addPrice = document.getElementById('add-price');
const addImg = document.getElementById('add-img');
const previewImg = document.getElementById('preview-img');
const previewName = document.getElementById('preview-name');
const previewPrice = document.getElementById('preview-price');

function escapeHtml(text){
  if(!text) return '';
  return text.replace(/[&<>"']/g, (m)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
}

addName.addEventListener('input', ()=> previewName.innerText = addName.value || 'Product Name');
addPrice.addEventListener('input', ()=> previewPrice.innerText = `$${Number(addPrice.value||0).toFixed(2)}`);
addImg.addEventListener('input', ()=> {
  const url = addImg.value.trim();
  previewImg.src = url || 'https://picsum.photos/seed/preview/300/200';
});

document.getElementById('add-product-btn').addEventListener('click', ()=>{
  const name = addName.value.trim();
  const price = addPrice.value.trim();
  const img = addImg.value.trim() || `https://picsum.photos/seed/${Math.floor(Math.random()*1000)}/400/300`;
  if(!name || !price){
    Swal.fire('Error','Name and price are required','error'); return;
  }
  const products = getProducts();
  const newId = products.length ? (products[products.length-1].id + 1) : 1;
  products.push({id:newId, name, price: Number(price), img});
  setProducts(products);
  Swal.fire('Success','Product added','success');

  addName.value = ''; addPrice.value=''; addImg.value='';
  previewImg.src = 'https://picsum.photos/300';
  previewName.innerText = 'Product Name';
  previewPrice.innerText = '$0';

  showPage('products');
});


function initApp(){

  if(localStorage.getItem('isLoggedIn') === 'true'){
    showPage('home');
  } else {
    showPage('login');
  }
  updateCartCount();
}

window.addEventListener('storage', (e)=>{
  if(e.key === 'cart') updateCartCount();
  if(e.key === 'products' && pages.products.classList.contains('active-page')) renderProducts();
});

initApp();
function updateCartCount(){
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  cartCountEl.innerText = cart.length;
  cartCountEl.classList.add('bump');
  setTimeout(()=> cartCountEl.classList.remove('bump'), 300);
}
</script>
</body>
</html>
